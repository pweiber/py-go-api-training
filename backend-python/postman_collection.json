{
    "info": {
        "name": "Task 1 - Basic REST API",
        "description": "Test collection for Book Store API"
    },
    "item": [
        {
            "name": "Health Check",
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/",
                    "host": ["{{base_url}}"]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Status code is 200', function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test('Response contains message', function () {",
                            "    const responseJson = pm.response.json();",
                            "    pm.expect(responseJson.message).to.eql('Book Store API');",
                            "});"
                        ]
                    }
                }
            ]
        },
        {
            "name": "Create Book",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"title\": \"The Python Guide\",\n    \"author\": \"John Doe\",\n    \"isbn\": \"978-0123456789\",\n    \"published_date\": \"2023-01-15\",\n    \"description\": \"A comprehensive guide to Python programming\"\n}"
                },
                "url": {
                    "raw": "{{base_url}}/api/v1/books",
                    "host": ["{{base_url}}"],
                    "path": ["api", "v1", "books"]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Status code is 201', function () {",
                            "    pm.response.to.have.status(201);",
                            "});",
                            "",
                            "pm.test('Book created successfully', function () {",
                            "    const responseJson = pm.response.json();",
                            "    pm.expect(responseJson.title).to.eql('The Python Guide');",
                            "    pm.expect(responseJson.author).to.eql('John Doe');",
                            "    pm.expect(responseJson.isbn).to.eql('978-0123456789');",
                            "    pm.globals.set('book_id', responseJson.id);",
                            "});"
                        ]
                    }
                }
            ]
        },
        {
            "name": "Get All Books",
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/api/v1/books",
                    "host": ["{{base_url}}"],
                    "path": ["api", "v1", "books"]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Status code is 200', function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test('Response is an array', function () {",
                            "    const responseJson = pm.response.json();",
                            "    pm.expect(responseJson).to.be.an('array');",
                            "});"
                        ]
                    }
                }
            ]
        },
        {
            "name": "Get Book by ID",
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/api/v1/books/{{book_id}}",
                    "host": ["{{base_url}}"],
                    "path": ["api", "v1", "books", "{{book_id}}"]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Status code is 200', function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test('Book details are correct', function () {",
                            "    const responseJson = pm.response.json();",
                            "    pm.expect(responseJson.title).to.eql('The Python Guide');",
                            "});"
                        ]
                    }
                }
            ]
        },
        {
            "name": "Update Book",
            "request": {
                "method": "PUT",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"title\": \"The Advanced Python Guide\",\n    \"description\": \"An advanced guide to Python programming with best practices\"\n}"
                },
                "url": {
                    "raw": "{{base_url}}/api/v1/books/{{book_id}}",
                    "host": ["{{base_url}}"],
                    "path": ["api", "v1", "books", "{{book_id}}"]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Status code is 200', function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test('Book updated successfully', function () {",
                            "    const responseJson = pm.response.json();",
                            "    pm.expect(responseJson.title).to.eql('The Advanced Python Guide');",
                            "});"
                        ]
                    }
                }
            ]
        },
        {
            "name": "Delete Book",
            "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/api/v1/books/{{book_id}}",
                    "host": ["{{base_url}}"],
                    "path": ["api", "v1", "books", "{{book_id}}"]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test('Status code is 200', function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test('Book deleted successfully', function () {",
                            "    const responseJson = pm.response.json();",
                            "    pm.expect(responseJson.message).to.eql('Book deleted successfully');",
                            "});"
                        ]
                    }
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8000"
        }
    ]
}

