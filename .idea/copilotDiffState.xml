<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/backend-python/src/main.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/backend-python/src/main.py" />
              <option name="originalContent" value="&quot;&quot;&quot;&#10;Main FastAPI application entry point.&#10;&#10;This module initializes the FastAPI application, registers middleware,&#10;exception handlers, and routes.&#10;&quot;&quot;&quot;&#10;from fastapi import FastAPI&#10;from fastapi.middleware.cors import CORSMiddleware&#10;from sqlalchemy.exc import IntegrityError, DataError, SQLAlchemyError, OperationalError&#10;&#10;from src.core.config import settings&#10;from src.core.database import init_db&#10;from src.core.exceptions import (&#10;    integrity_error_handler,&#10;    data_error_handler,&#10;    operational_error_handler,&#10;    sqlalchemy_error_handler,&#10;    database_exception_handler,&#10;    DatabaseException,&#10;)&#10;from src.api.v1.endpoints import books&#10;&#10;&#10;app = FastAPI(&#10;    title=&quot;Intern Training API&quot;,&#10;    description=&quot;Production-ready FastAPI application for intern training program&quot;,&#10;    version=&quot;1.0.0&quot;,&#10;    docs_url=&quot;/docs&quot;,&#10;    redoc_url=&quot;/redoc&quot;,&#10;)&#10;&#10;# ============================================================================&#10;# EXCEPTION HANDLERS REGISTRATION&#10;# ============================================================================&#10;# Register in order of specificity (most specific first, most general last)&#10;&#10;# Most specific: Handle integrity errors (unique constraints, foreign keys, etc.)&#10;app.add_exception_handler(IntegrityError, integrity_error_handler)&#10;&#10;# Handle data errors (invalid types, values too long, etc.)&#10;app.add_exception_handler(DataError, data_error_handler)&#10;&#10;# Handle operational errors (connection issues, timeouts, etc.)&#10;app.add_exception_handler(OperationalError, operational_error_handler)&#10;&#10;# Handle our custom database exceptions&#10;app.add_exception_handler(DatabaseException, database_exception_handler)&#10;&#10;# Most general: Catch-all for any other SQLAlchemy errors&#10;app.add_exception_handler(SQLAlchemyError, sqlalchemy_error_handler)&#10;&#10;# ============================================================================&#10;# MIDDLEWARE CONFIGURATION&#10;# ============================================================================&#10;&#10;# CORS middleware configuration&#10;app.add_middleware(&#10;    CORSMiddleware,&#10;    allow_origins=settings.ALLOWED_ORIGINS,&#10;    allow_credentials=True,&#10;    allow_methods=[&quot;*&quot;],&#10;    allow_headers=[&quot;*&quot;],&#10;)&#10;&#10;# ============================================================================&#10;# HEALTH CHECK AND ROOT ENDPOINTS&#10;# ============================================================================&#10;&#10;@app.get(&quot;/health&quot;)&#10;async def health_check():&#10;    &quot;&quot;&quot;&#10;    Health check endpoint for monitoring and load balancers.&#10;&#10;    Returns:&#10;        dict: Service health status&#10;    &quot;&quot;&quot;&#10;    return {&#10;        &quot;status&quot;: &quot;healthy&quot;,&#10;        &quot;service&quot;: &quot;intern-training-api&quot;,&#10;        &quot;version&quot;: &quot;1.0.0&quot;&#10;    }&#10;&#10;&#10;@app.get(&quot;/&quot;)&#10;async def root():&#10;    &quot;&quot;&quot;&#10;    Root endpoint with API information.&#10;&#10;    Returns:&#10;        dict: API welcome message and documentation links&#10;    &quot;&quot;&quot;&#10;    return {&#10;        &quot;message&quot;: &quot;Book Store API&quot;,&#10;        &quot;version&quot;: &quot;1.0.0&quot;,&#10;        &quot;docs&quot;: &quot;/docs&quot;,&#10;        &quot;health&quot;: &quot;/health&quot;&#10;    }&#10;&#10;# ============================================================================&#10;# ROUTER REGISTRATION&#10;# ============================================================================&#10;&#10;# Include API routers&#10;app.include_router(books.router, prefix=&quot;/api/v1&quot;, tags=[&quot;books&quot;])&#10;&#10;# ============================================================================&#10;# APPLICATION STARTUP&#10;# ============================================================================&#10;&#10;if __name__ == &quot;__main__&quot;:&#10;    import uvicorn&#10;    # Initialize database tables when running directly&#10;    init_db()&#10;    uvicorn.run(app, host=&quot;0.0.0.0&quot;, port=8000, reload=True)&#10;" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Main FastAPI application entry point.&#10;&#10;This module initializes the FastAPI application, registers middleware,&#10;exception handlers, and routes.&#10;&quot;&quot;&quot;&#10;from fastapi import FastAPI&#10;from fastapi.middleware.cors import CORSMiddleware&#10;from sqlalchemy.exc import IntegrityError, DataError, SQLAlchemyError, OperationalError&#10;&#10;from src.core.config import settings&#10;from src.core.database import init_db&#10;from src.core.exceptions import (&#10;    integrity_error_handler,&#10;    data_error_handler,&#10;    operational_error_handler,&#10;    sqlalchemy_error_handler,&#10;    database_exception_handler,&#10;    DatabaseException,&#10;)&#10;from src.api.v1.endpoints import books&#10;&#10;&#10;app = FastAPI(&#10;    title=&quot;Intern Training API&quot;,&#10;    description=&quot;Production-ready FastAPI application for intern training program&quot;,&#10;    version=&quot;1.0.0&quot;,&#10;    docs_url=&quot;/docs&quot;,&#10;    redoc_url=&quot;/redoc&quot;,&#10;)&#10;&#10;# ============================================================================&#10;# EXCEPTION HANDLERS REGISTRATION&#10;# ============================================================================&#10;# Register in order of specificity (most specific first, most general last)&#10;&#10;# Most specific: Handle integrity errors (unique constraints, foreign keys, etc.)&#10;app.add_exception_handler(IntegrityError, integrity_error_handler)&#10;&#10;# Handle data errors (invalid types, values too long, etc.)&#10;app.add_exception_handler(DataError, data_error_handler)&#10;&#10;# Handle operational errors (connection issues, timeouts, etc.)&#10;app.add_exception_handler(OperationalError, operational_error_handler)&#10;&#10;# Handle our custom database exceptions&#10;app.add_exception_handler(DatabaseException, database_exception_handler)&#10;&#10;# Most general: Catch-all for any other SQLAlchemy errors&#10;app.add_exception_handler(SQLAlchemyError, sqlalchemy_error_handler)&#10;&#10;# ============================================================================&#10;# MIDDLEWARE CONFIGURATION&#10;# ============================================================================&#10;&#10;# CORS middleware configuration&#10;app.add_middleware(&#10;    CORSMiddleware,&#10;    allow_origins=settings.ALLOWED_ORIGINS,&#10;    allow_credentials=True,&#10;    allow_methods=[&quot;*&quot;],&#10;    allow_headers=[&quot;*&quot;],&#10;)&#10;&#10;# ============================================================================&#10;# HEALTH CHECK AND ROOT ENDPOINTS&#10;# ============================================================================&#10;&#10;@app.get(&quot;/health&quot;)&#10;async def health_check():&#10;    &quot;&quot;&quot;&#10;    Health check endpoint for monitoring and load balancers.&#10;&#10;    Returns:&#10;        dict: Service health status&#10;    &quot;&quot;&quot;&#10;    return {&#10;        &quot;status&quot;: &quot;healthy&quot;,&#10;        &quot;service&quot;: &quot;intern-training-api&quot;,&#10;        &quot;version&quot;: &quot;1.0.0&quot;&#10;    }&#10;&#10;&#10;@app.get(&quot;/&quot;)&#10;async def root():&#10;    &quot;&quot;&quot;&#10;    Root endpoint with API information.&#10;&#10;    Returns:&#10;        dict: API welcome message and documentation links&#10;    &quot;&quot;&quot;&#10;    return {&#10;        &quot;message&quot;: &quot;Book Store API&quot;,&#10;        &quot;version&quot;: &quot;1.0.0&quot;,&#10;        &quot;docs&quot;: &quot;/docs&quot;,&#10;        &quot;health&quot;: &quot;/health&quot;&#10;    }&#10;&#10;# ============================================================================&#10;# ROUTER REGISTRATION&#10;# ============================================================================&#10;&#10;# Include API routers&#10;app.include_router(books.router, prefix=&quot;/api/v1&quot;, tags=[&quot;books&quot;])&#10;&#10;# ============================================================================&#10;# APPLICATION STARTUP&#10;# ============================================================================&#10;&#10;if __name__ == &quot;__main__&quot;:&#10;    import uvicorn&#10;    # Initialize database tables when running directly&#10;    init_db()&#10;    uvicorn.run(app, host=&quot;0.0.0.0&quot;, port=8000, reload=True)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>